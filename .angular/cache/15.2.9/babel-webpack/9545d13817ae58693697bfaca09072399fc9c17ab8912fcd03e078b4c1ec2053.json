{"ast":null,"code":"var _class;\nimport { Book } from '../book';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../book.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction BookPageComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.message, \"\\n\");\n  }\n}\nfunction BookPageComponent_tr_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function BookPageComponent_tr_43_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const book_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.updateBook(book_r2));\n    });\n    i0.ɵɵtext(9, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function BookPageComponent_tr_43_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const book_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deleteBook(book_r2.id));\n    });\n    i0.ɵɵtext(11, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const book_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r2.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r2.author);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r2.year);\n  }\n}\nexport class BookPageComponent {\n  constructor(bookService) {\n    this.bookService = bookService;\n    this.books = [];\n    this.id = '';\n    this.newBook = new Book();\n    this.changeBook = new Book();\n    this.searchTerm = '';\n  }\n  ngOnInit() {\n    this.fetchBooks();\n    this.message;\n  }\n  fetchBooks() {\n    this.bookService.getBooks().subscribe(response => {\n      this.message = '';\n      this.id = '';\n      this.books = response;\n      console.log(this.books);\n    }, error => {\n      console.error(\"Error occured in getBooks()\");\n      this.message = \"Error occured in fetchBooks()\";\n      ;\n    });\n  }\n  findBook() {\n    this.bookService.searchBook(this.id).subscribe(response => {\n      this.message = '';\n      this.books = [];\n      this.books = [response];\n    }, error => {\n      console.error(\"Error occured in findBook()\");\n      if (error.status == 404) this.message = \"Book with ID: \" + this.id + \" is not present\";else this.message = \"Error occured in findBook()\";\n    });\n  }\n  filterBook() {\n    if (this.searchTerm.trim() == '') {\n      this.fetchBooks();\n    } else {\n      this.books = this.books.filter(book => book.title.toLowerCase().includes(this.searchTerm.toLowerCase()) || book.author.toLowerCase().includes(this.searchTerm.toLowerCase()));\n    }\n  }\n  addBook() {\n    console.log(Number(this.newBook.year), typeof this.newBook.author, typeof this.newBook.title);\n    if (typeof this.newBook.author != \"string\" || typeof this.newBook.title != \"string\" || isNaN(Number(this.newBook.year))) {\n      this.message = \"Please enter valid Data\";\n      return;\n    } else {\n      this.bookService.addBook(this.newBook).subscribe(response => {\n        this.message = '';\n        this.fetchBooks();\n      }, error => {\n        console.error(\"Error occured in addBook()\");\n        this.message = \"Error occured in addBook()\";\n      });\n    }\n  }\n  deleteBook(id) {\n    console.log(id);\n    this.bookService.deleteBook(id).subscribe(response => {\n      this.fetchBooks();\n    }, error => {\n      console.error(\"Error occured in deleteBook()\");\n      this.message = \"Error occured in deleteBook()\";\n    });\n  }\n  updateBook(book) {\n    this.changeBook = {\n      ...book\n    };\n    document.getElementById('updateBook').style.display = \"block\";\n  }\n}\n_class = BookPageComponent;\n_class.ɵfac = function BookPageComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.BookService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-book-page\"]],\n  decls: 50,\n  vars: 7,\n  consts: [[\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"container\"], [3, \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"title\"], [\"type\", \"text\", \"id\", \"title\", \"name\", \"title\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"author\"], [\"type\", \"text\", \"id\", \"Author\", \"name\", \"Author\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"year\"], [\"type\", \"text\", \"id\", \"year\", \"name\", \"year\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [\"type\", \"text\", \"placeholder\", \"Filter by title or author\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"type\", \"text\", \"placeholder\", \"Search by Book Id\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"btn\", \"btn-warning\", 3, \"click\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"updateBook\", 1, \"modal\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"close\"], [1, \"alert\", \"alert-danger\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n  template: function BookPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, BookPageComponent_div_0_Template, 2, 1, \"div\", 0);\n      i0.ɵɵelement(1, \"br\");\n      i0.ɵɵelementStart(2, \"div\", 1)(3, \"h3\");\n      i0.ɵɵtext(4, \" Add New Book\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"form\", 2);\n      i0.ɵɵlistener(\"ngSubmit\", function BookPageComponent_Template_form_ngSubmit_5_listener() {\n        return ctx.addBook();\n      });\n      i0.ɵɵelementStart(6, \"div\", 3)(7, \"label\", 4);\n      i0.ɵɵtext(8, \"Title:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function BookPageComponent_Template_input_ngModelChange_9_listener($event) {\n        return ctx.newBook.title = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"label\", 6);\n      i0.ɵɵtext(11, \"Author:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function BookPageComponent_Template_input_ngModelChange_12_listener($event) {\n        return ctx.newBook.author = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"label\", 8);\n      i0.ɵɵtext(14, \"Year:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function BookPageComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.newBook.year = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(16, \"br\");\n      i0.ɵɵelementStart(17, \"button\", 10);\n      i0.ɵɵtext(18, \"Add\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(19, \"br\");\n      i0.ɵɵelementStart(20, \"div\", 1)(21, \"h2\");\n      i0.ɵɵtext(22, \" Book Directory \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"input\", 11);\n      i0.ɵɵlistener(\"ngModelChange\", function BookPageComponent_Template_input_ngModelChange_23_listener($event) {\n        return ctx.searchTerm = $event;\n      })(\"input\", function BookPageComponent_Template_input_input_23_listener() {\n        return ctx.filterBook();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"br\");\n      i0.ɵɵelementStart(25, \"input\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function BookPageComponent_Template_input_ngModelChange_25_listener($event) {\n        return ctx.id = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(26, \"br\");\n      i0.ɵɵelementStart(27, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function BookPageComponent_Template_button_click_27_listener() {\n        return ctx.findBook();\n      });\n      i0.ɵɵtext(28, \"Search\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"button\", 14);\n      i0.ɵɵlistener(\"click\", function BookPageComponent_Template_button_click_29_listener() {\n        return ctx.fetchBooks();\n      });\n      i0.ɵɵtext(30, \"Clear\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"table\", 15)(32, \"thead\")(33, \"tr\")(34, \"th\");\n      i0.ɵɵtext(35, \"Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"th\");\n      i0.ɵɵtext(37, \"Author\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"th\");\n      i0.ɵɵtext(39, \"Year\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"th\");\n      i0.ɵɵtext(41, \"Action\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(42, \"tbody\");\n      i0.ɵɵtemplate(43, BookPageComponent_tr_43_Template, 12, 3, \"tr\", 16);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(44, \"div\", 17)(45, \"div\", 18)(46, \"div\", 19)(47, \"h5\", 20);\n      i0.ɵɵtext(48, \"Update Book\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(49, \"button\", 21);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.message);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.newBook.title);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.newBook.author);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.newBook.year);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.searchTerm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.id);\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"ngForOf\", ctx.books);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Book","i0","BookPageComponent","constructor","bookService","ngOnInit","fetchBooks","message","getBooks","subscribe","response","id","books","console","log","error","findBook","searchBook","status","filterBook","searchTerm","trim","filter","book","title","toLowerCase","includes","author","addBook","Number","newBook","year","isNaN","deleteBook","updateBook","changeBook","document","getElementById","style","display","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Sagar Drive\\StudyMaterial\\Assessments\\Staples\\frontend\\src\\app\\book-page\\book-page.component.ts","C:\\Sagar Drive\\StudyMaterial\\Assessments\\Staples\\frontend\\src\\app\\book-page\\book-page.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Book } from '../book';\nimport { BookService } from '../book.service';\n\n@Component({\n  selector: 'app-book-page',\n  templateUrl: './book-page.component.html',\n  styleUrls: ['./book-page.component.css']\n})\nexport class BookPageComponent implements OnInit {\n  books: Book[] = [];\n  id = '';\n  newBook: Book = new Book();\n  changeBook: Book = new Book();\n  message: any;\n  searchTerm = '';\n\n\n  constructor( private bookService: BookService) { }\n\n  ngOnInit(): void {\n    this.fetchBooks();\n    this.message ;\n  }\n\n  fetchBooks(){\n    this.bookService.getBooks().subscribe( (response) => {\n      this.message = '';\n      this.id = '';\n      this.books = response;\n      console.log(this.books);\n    },\n    (error) => {\n      console.error(\"Error occured in getBooks()\");\n      this.message = \"Error occured in fetchBooks()\";;\n    }\n    );\n  }\n\n  findBook(){\n    this.bookService.searchBook(this.id).subscribe( (response) =>{\n      this.message = '';\n      this.books = [];\n      this.books = [response];\n    },\n    (error) => {\n      console.error(\"Error occured in findBook()\");\n      if(error.status == 404) this.message = \"Book with ID: \"+this.id+\" is not present\";\n      else this.message = \"Error occured in findBook()\";\n    })\n  }\n\n  filterBook(){\n    if(this.searchTerm.trim() == ''){\n      this.fetchBooks();\n    } else{\n      this.books = this.books.filter( book =>\n        book.title.toLowerCase().includes(this.searchTerm.toLowerCase()) || book.author.toLowerCase().includes(this.searchTerm.toLowerCase()));\n    }\n  }\n\n  addBook(){\n    console.log(Number(this.newBook.year), typeof this.newBook.author, typeof this.newBook.title);\n    if(typeof this.newBook.author != \"string\" || typeof this.newBook.title != \"string\" || isNaN(Number(this.newBook.year)) ) {\n      this.message = \"Please enter valid Data\"\n      return;\n    }\n    else{\n      this.bookService.addBook(this.newBook).subscribe( (response) =>{\n        this.message = '';\n        this.fetchBooks();\n      },\n      (error) => {\n        console.error(\"Error occured in addBook()\");\n        this.message = \"Error occured in addBook()\";\n      })\n    }\n    \n  }\n  \n  deleteBook(id: number){\n    console.log(id)\n    this.bookService.deleteBook(id).subscribe( (response) =>{\n      this.fetchBooks();\n    },\n    (error) => {\n      console.error(\"Error occured in deleteBook()\");\n      this.message = \"Error occured in deleteBook()\";\n    })\n  }\n\n  updateBook(book: any){\n    this.changeBook = {...book};\n    document.getElementById('updateBook').style.display = \"block\";\n  }\n\n}\n","<div class=\"alert alert-danger\" *ngIf=\"message\">\n    {{message}}\n</div>\n<br>\n<div class=\"container\">\n    <h3> Add New Book</h3>\n    <form (ngSubmit)=\"addBook()\">\n        <div class=\"form-group\">\n            <label for=\"title\">Title:</label>\n            <input type=\"text\" class=\"form-control\" id=\"title\" [(ngModel)]=\"newBook.title\" name=\"title\" required>\n            <label for=\"author\">Author:</label>\n            <input type=\"text\" class=\"form-control\" id=\"Author\" [(ngModel)]=\"newBook.author\" name=\"Author\" required>\n            <label for=\"year\">Year:</label>\n            <input type=\"text\" class=\"form-control\" id=\"year\" [(ngModel)]=\"newBook.year\" name=\"year\" required>\n        </div> <br>\n        <button type=\"submit\" class=\"btn btn-primary\">Add</button>\n    </form>\n</div>\n<br>\n<div class=\"container\">\n    <h2> Book Directory </h2>\n    <input type=\"text\" class=\"form-control\" [(ngModel)] = \"searchTerm\" (input)=\"filterBook()\" placeholder=\"Filter by title or author\"> <br>\n    <input type=\"text\" class=\"form-control\" [(ngModel)] = \"id\" placeholder=\"Search by Book Id\"> <br>\n    <button class=\"btn btn-primary\" (click)=\"findBook()\">Search</button> \n    <button class=\"btn btn-warning\" (click)=\"fetchBooks()\">Clear</button>        \n    <table class=\"table\">\n        <thead>\n            <tr>\n                <th>Title</th>\n                <th>Author</th>\n                <th>Year</th>\n                <th>Action</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr *ngFor=\"let book of books\">\n                <td>{{book.title}}</td>\n                <td>{{book.author}}</td>\n                <td>{{book.year}}</td>\n                <td>\n                    <button class=\"btn btn-primary\" (click)=\"updateBook(book)\">Edit</button>\n                    <button class=\"btn btn-danger\" (click)=\"deleteBook(book.id)\">Delete</button>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n<div class=\"modal\" id=\"updateBook\">\n    <div class=\"modal-content\">\n        <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Update Book</h5>\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\"></button>\n        </div>\n\n    </div>\n\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}