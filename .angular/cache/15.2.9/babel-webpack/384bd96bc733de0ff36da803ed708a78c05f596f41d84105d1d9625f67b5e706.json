{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Book } from '../book';\nlet BookPageComponent = class BookPageComponent {\n  constructor(bookService) {\n    this.bookService = bookService;\n    this.books = [];\n    this.id = '';\n    this.newBook = new Book();\n    this.changeBook = new Book();\n    this.searchTerm = '';\n    this.updateModal = 'updateBook';\n    this.updateFlag = false;\n    this.addFlag = false;\n  }\n  ngOnInit() {\n    this.fetchBooks();\n    this.message;\n  }\n  addBookFlag() {\n    this.addFlag = true;\n  }\n  fetchBooks() {\n    this.bookService.getBooks().subscribe(response => {\n      this.message = '';\n      this.id = '';\n      this.books = response;\n      console.log(this.books);\n    }, error => {\n      console.error(\"Error occured in getBooks()\");\n      this.message = \"Error occured in fetchBooks()\";\n      ;\n    });\n  }\n  findBook() {\n    this.bookService.searchBook(this.id).subscribe(response => {\n      this.message = '';\n      this.books = [];\n      this.books = [response];\n    }, error => {\n      console.error(\"Error occured in findBook()\");\n      if (error.status == 404) this.message = \"Book with ID: \" + this.id + \" is not present\";else this.message = \"Error occured in findBook()\";\n    });\n  }\n  filterBook() {\n    if (this.searchTerm.trim() == '') {\n      this.fetchBooks();\n    } else {\n      this.books = this.books.filter(book => book.title.toLowerCase().includes(this.searchTerm.toLowerCase()) || book.author.toLowerCase().includes(this.searchTerm.toLowerCase()));\n    }\n  }\n  addBook() {\n    console.log(Number(this.newBook.year), typeof this.newBook.author, typeof this.newBook.title);\n    if (typeof this.newBook.author != \"string\" || typeof this.newBook.title != \"string\" || isNaN(Number(this.newBook.year))) {\n      this.message = \"Please enter valid Data\";\n      return;\n    } else {\n      this.bookService.addBook(this.newBook).subscribe(response => {\n        this.message = '';\n        this.fetchBooks();\n      }, error => {\n        console.error(\"Error occured in addBook()\");\n        this.message = \"Error occured in addBook()\";\n      });\n    }\n  }\n  deleteBook(id) {\n    console.log(id);\n    this.bookService.deleteBook(id).subscribe(response => {\n      this.fetchBooks();\n    }, error => {\n      console.error(\"Error occured in deleteBook()\");\n      this.message = \"Error occured in deleteBook()\";\n    });\n  }\n  updateBook(book) {\n    this.changeBook = {\n      ...book\n    };\n    this.updateFlag = true;\n  }\n  toUpdateBook() {\n    console.log(this.changeBook);\n    this.bookService.updateBook(this.changeBook).subscribe(response => {\n      this.message = '';\n      this.books = response;\n    }, error => {\n      console.error(\"Error occured in toUpdateBook()\");\n      this.message = \"Error occured in toUpdateBook()\";\n    });\n  }\n  closeUpdateBook() {\n    this.updateFlag = false;\n    this.changeBook;\n  }\n  sortBooks(byType) {\n    if (byType == 1) {\n      this.books.sort((a, b) => a.title.localeCompare(b.title));\n    } else if (byType == 2) {\n      this.books.sort((a, b) => a.author.localeCompare(b.author));\n    } else if (byType == 3) {\n      this.books.sort((a, b) => a.year - b.year);\n    }\n  }\n};\nBookPageComponent = __decorate([Component({\n  selector: 'app-book-page',\n  templateUrl: './book-page.component.html',\n  styleUrls: ['./book-page.component.css']\n})], BookPageComponent);\nexport { BookPageComponent };","map":{"version":3,"mappings":"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","names":["Component","Book","BookPageComponent","constructor","bookService","ngOnInit","fetchBooks","message","addBookFlag","addFlag","getBooks","subscribe","response","id","books","console","log","error","findBook","searchBook","status","filterBook","searchTerm","trim","filter","book","title","toLowerCase","includes","author","addBook","Number","newBook","year","isNaN","deleteBook","updateBook","changeBook","updateFlag","toUpdateBook","closeUpdateBook","sortBooks","byType","sort","a","b","localeCompare","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Sagar Drive\\StudyMaterial\\Assessments\\Staples\\frontend\\src\\app\\book-page\\book-page.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Book } from '../book';\nimport { BookService } from '../book.service';\n\n@Component({\n  selector: 'app-book-page',\n  templateUrl: './book-page.component.html',\n  styleUrls: ['./book-page.component.css']\n})\nexport class BookPageComponent implements OnInit {\n  books: Book[] = [];\n  id = '';\n  newBook: Book = new Book();\n  changeBook: Book = new Book();\n  message: any;\n  searchTerm = '';\n  updateModal = 'updateBook';\n  updateFlag = false;\n  addFlag = false;\n\n\n  constructor( private bookService: BookService) { }\n\n  ngOnInit(): void {\n    this.fetchBooks();\n    this.message ;\n  }\n\n\n  addBookFlag(){\n    this.addFlag = true;\n  }\n\n  fetchBooks(){\n    this.bookService.getBooks().subscribe( (response) => {\n      this.message = '';\n      this.id = '';\n      this.books = response;\n      console.log(this.books);\n    },\n    (error) => {\n      console.error(\"Error occured in getBooks()\");\n      this.message = \"Error occured in fetchBooks()\";;\n    }\n    );\n  }\n\n  findBook(){\n    this.bookService.searchBook(this.id).subscribe( (response) =>{\n      this.message = '';\n      this.books = [];\n      this.books = [response];\n    },\n    (error) => {\n      console.error(\"Error occured in findBook()\");\n      if(error.status == 404) this.message = \"Book with ID: \"+this.id+\" is not present\";\n      else this.message = \"Error occured in findBook()\";\n    })\n  }\n\n  filterBook(){\n    if(this.searchTerm.trim() == ''){\n      this.fetchBooks();\n    } else{\n      this.books = this.books.filter( book =>\n        book.title.toLowerCase().includes(this.searchTerm.toLowerCase()) || book.author.toLowerCase().includes(this.searchTerm.toLowerCase()));\n    }\n  }\n\n  addBook(){\n    console.log(Number(this.newBook.year), typeof this.newBook.author, typeof this.newBook.title);\n    if(typeof this.newBook.author != \"string\" || typeof this.newBook.title != \"string\" || isNaN(Number(this.newBook.year)) ) {\n      this.message = \"Please enter valid Data\"\n      return;\n    }\n    else{\n      this.bookService.addBook(this.newBook).subscribe( (response) =>{\n        this.message = '';\n        this.fetchBooks();\n      },\n      (error) => {\n        console.error(\"Error occured in addBook()\");\n        this.message = \"Error occured in addBook()\";\n      })\n    }\n    \n  }\n  \n  deleteBook(id: number){\n    console.log(id)\n    this.bookService.deleteBook(id).subscribe( (response) =>{\n      this.fetchBooks();\n    },\n    (error) => {\n      console.error(\"Error occured in deleteBook()\");\n      this.message = \"Error occured in deleteBook()\";\n    })\n  }\n\n  updateBook(book: any){\n    this.changeBook = {...book};\n    this.updateFlag = true;\n  }\n\n  toUpdateBook(){\n    console.log(this.changeBook);\n    this.bookService.updateBook(this.changeBook).subscribe( (response) =>{\n      this.message = '';\n      this.books = response;\n    },\n    (error) => {\n      console.error(\"Error occured in toUpdateBook()\");\n      this.message = \"Error occured in toUpdateBook()\";\n    })\n  }\n  \n  closeUpdateBook(){\n    this.updateFlag = false\n    this.changeBook;\n  }\n\n  sortBooks(byType: any){\n    if(byType == 1){\n      this.books.sort((a,b)=> a.title.localeCompare(b.title));\n    }\n    else if(byType == 2){\n      this.books.sort((a,b)=> a.author.localeCompare(b.author));\n    }\n    else if(byType == 3){\n      this.books.sort((a,b)=> a.year - b.year);\n    }\n\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}